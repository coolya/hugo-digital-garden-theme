<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Enable Google Analytics -->
    {{ if .Site.Params.googleAnalytics }}
    <script async src="https://www.googletagmanager.com/gtag/js?id={{ .Site.Params.googleAnalytics }}"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', '{{ .Site.Params.googleAnalytics }}');
    </script>
    {{ end }}
    <!-- Enable Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@300;400;600;700;800&family=Frank+Ruhl+Libre:wght@200;300;400;500;600&family=Encode+Sans+Semi+Condensed:wght@400&display=swap" rel="stylesheet">
    <!-- CSS Styles (including Bootstrap 5 and FontAwesome 6) -->
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/css/all.min.css">
    <link disabled id="dark-mode-theme" rel="stylesheet" href="/css/dark.css">
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <link rel="stylesheet" type="text/css" href="/css/my_style.css">
    <!-- Site Title -->
    {{ $title := print .Site.Title " | " .Title }}
    {{ if .IsHome }}{{ $title = .Site.Title }}{{ end }}
    {{ $description := "" }}
    {{ if .IsPage }}
    {{ $description = .Summary }}
    {{ else if .IsHome }}
    {{ $description = .Site.Params.description }}
    {{ end }}
    {{ $url := .Permalink }}
    {{ if not $url }}{{ $url = .Site.BaseURL }}{{ end }}
    {{ $image := "" }}
    {{ if .Params.images }}
    {{ $image = index .Params.images 0 }}
    {{ else if .Params.image }}
    {{ $image = .Params.image }}
    {{ else if .Params.featuredImage }}
    {{ $image = .Params.featuredImage }}
    {{ else if (.Resources.GetMatch "featured.*") }}
    {{ $image = (.Resources.GetMatch "featured.*").Permalink }}
    {{ else if .Site.Params.socialImage }}
    {{ $image = .Site.Params.socialImage }}
    {{ else }}
    {{ $image = (print .Site.BaseURL "images/social-share.png") }}
    {{ end }}
    {{/* Ensure $image is an absolute URL if provided as relative */}}
    {{ if $image }}
    {{ if not (or (hasPrefix $image "http://") (hasPrefix $image "https://") (hasPrefix $image "//")) }}
    {{ $clean := replace $image "./" "" }}
    {{ $image = absURL $clean }}
    {{ end }}
    {{ end }}
    <title>{{ $title }}</title>
    {{ partial "plausible.html" . }}
    <meta name="description" content="{{ $description }}">
    <meta property="og:title" content="{{ $title }}">
    <meta property="og:description" content="{{ $description }}">
    <meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
    <meta property="og:url" content="{{ $url }}">
    <meta property="og:site_name" content="{{ .Site.Title }}">
    {{ if $image }}<meta property="og:image" content="{{ $image }}">{{ end }}
    <meta name="twitter:card" content="{{ if $image }}summary_large_image{{ else }}summary{{ end }}">
    {{ with .Site.Params.twitter }}<meta name="twitter:site" content="{{ . }}">{{ end }}
    <meta name="twitter:title" content="{{ $title }}">
    <meta name="twitter:description" content="{{ $description }}">
    {{ if $image }}<meta name="twitter:image" content="{{ $image }}">{{ end }}
</head>